!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e,i){var s=i(1),n=i(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var r={insert:"head",singleton:!1};s(n,r);t.exports=n.locals||{}},function(t,e,i){"use strict";var s,n=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function h(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function o(t,e){for(var i={},s=[],n=0;n<t.length;n++){var r=t[n],o=e.base?r[0]+e.base:r[0],d=i[o]||0,c="".concat(o," ").concat(d);i[o]=d+1;var l=h(c),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==l?(a[l].references++,a[l].updater(u)):a.push({identifier:c,updater:v(u,e),references:1}),s.push(c)}return s}function d(t){var e=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var n=i.nc;n&&(s.nonce=n)}if(Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,l=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function u(t,e,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=l(e,n);else{var r=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function p(t,e,i){var s=i.css,n=i.media,r=i.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),r&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var f=null,w=0;function v(t,e){var i,s,n;if(e.singleton){var r=w++;i=f||(f=d(e)),s=u.bind(null,i,r,!1),n=u.bind(null,i,r,!0)}else i=d(e),s=p.bind(null,i,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var i=o(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<i.length;s++){var n=h(i[s]);a[n].references--}for(var r=o(t,e),d=0;d<i.length;d++){var c=h(i[d]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=r}}}},function(t,e,i){(e=i(3)(!1)).push([t.i,"body {\r\n    text-align: center;\r\n    font-family: sans-serif;\r\n}\r\n\r\ncanvas {\r\n    background-color: black;\r\n    border: 3px solid white;\r\n    outline: none;\r\n}\r\n\r\ncanvas:focus {\r\n    border: 3px solid #009900;\r\n}\r\n",""]),t.exports=e},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var n=(a=s,h=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(h),"/*# ".concat(o," */")),r=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[i].concat(r).concat([n]).join("\n")}var a,h,o;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(s)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(var h=0;h<t.length;h++){var o=[].concat(t[h]);s&&n[o[0]]||(i&&(o[2]?o[2]="".concat(i," and ").concat(o[2]):o[2]=i),e.push(o))}},e}},function(t,e,i){"use strict";i.r(e);i(0);class s{constructor(t,e,i,s,n=0,r){this._x=t,this._y=e,this._radius=s,this.speed=r,this.angle=n,this.mass=i;const{x:a=0,y:h=0,rotation:o=0}=this.speed||{};this.speed={x:a,y:h,rotation:o}}get radius(){return this._radius}get x(){return this._x}get y(){return this._y}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),t.strokeStyle="white",t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.lineTo(0,0),t.stroke(),t.restore()}getMovementAngle(){return Math.atan2(this.speed.y,this.speed.x)}getSpeed(){return Math.sqrt(Math.pow(this.speed.x,2)+Math.pow(this.speed.y,2))}push(t,e,i){this.speed.x+=i*(Math.cos(t)*e)/this.mass,this.speed.y+=i*(Math.sin(t)*e)/this.mass}twist(t,e){this.speed.rotation+=e*t/this.mass}update(t,e){const{height:i,width:s}=t.canvas;this._x+=this.speed.x*e,this._y+=this.speed.y*e,this.angle=(this.angle+this.speed.rotation*e)%(2*Math.PI),this.x-this.radius>s&&(this._x=-this.radius),this.x+this.radius<0&&(this._x=s+this.radius),this.y+this.radius<0&&(this._y=i+this.radius),this.y-this.radius>i&&(this._y=-this.radius)}}var n,r=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},a=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class h extends s{constructor(t,e,i,s,a){super(t,e,i,Math.sqrt(i/.001/Math.PI),0,a),this.lifetime=s,this.speed=a,n.set(this,void 0),r(this,n,1)}get life(){return a(this,n)}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),class{static drawProjectile(t,e,i){t.save(),t.beginPath(),t.fillStyle=`rgb(100%, 100%, ${100*i}%)`,t.arc(0,0,e,0,2*Math.PI),t.fill(),t.restore()}}.drawProjectile(t,this.radius,a(this,n)),t.restore()}update(t,e){r(this,n,a(this,n)-e/this.lifetime),super.update(t,e)}}n=new WeakMap;var o,d,c=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},l=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class u{constructor(t,e){this._power=t,this.reloadTime=e,o.set(this,!0),d.set(this,void 0),c(this,d,e)}get power(){return this._power}isLoaded(){return l(this,o)}reload(){c(this,d,this.reloadTime)}update(t){c(this,o,0===l(this,d)),this.isLoaded()||c(this,d,l(this,d)-Math.min(t,l(this,d)))}}o=new WeakMap,d=new WeakMap;var p,f,w,v=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},g=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class m extends s{constructor(t,e,i){super(t,e,10,20,1.5*Math.PI),this.compromised=!1,this.reverse=!1,this.weaponTrigger=!1,p.set(this,void 0),f.set(this,void 0),w.set(this,void 0);this.health={max:2,left:2},v(this,p,i/15),v(this,f,{power:i,on:!1,right:!1,left:!1}),v(this,w,new u(2*i,.25))}get weaponLoaded(){return g(this,w).isLoaded()}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),class{static drawSpaceship(t,e,i,s=!1){const n=.5*Math.PI/2;i&&this.drawThrusterBurn(t,e),t.save(),t.lineWidth=2,t.strokeStyle="white",t.fillStyle=s?"red":"black",t.beginPath(),t.moveTo(e,0),t.quadraticCurveTo(Math.cos(n)*e*.75,Math.sin(n)*e*.75,Math.cos(Math.PI-n)*e,Math.sin(Math.PI-n)*e),t.quadraticCurveTo(.25*-e,0,Math.cos(Math.PI+n)*e,Math.sin(Math.PI+n)*e),t.quadraticCurveTo(Math.cos(-n)*e*.75,Math.sin(-n)*e*.75,e,0),t.fill(),t.stroke(),t.restore()}static drawThrusterBurn(t,e){t.save(),t.strokeStyle="yellow",t.fillStyle="red",t.lineWidth=3;const i=Math.PI/5;t.beginPath(),t.moveTo(Math.cos(Math.PI+i)*e/2,Math.sin(Math.PI+i)*e/2),t.quadraticCurveTo(2*-e,0,Math.cos(Math.PI-i)*e/2,Math.sin(Math.PI-i)*e/2),t.fill(),t.stroke(),t.restore()}}.drawSpaceship(t,this.radius,g(this,f).on,this.compromised),t.restore()}shoot(t){const e=new h(this.x+Math.cos(this.angle)*this.radius,this.y+Math.sin(this.angle)*this.radius,.025,1,Object.assign({},this.speed));return e.push(this.angle,g(this,w).power,t),this.push(this.angle+Math.PI,g(this,w).power,t),g(this,w).reload(),e}thrusterLeft(t){g(this,f).left=t}thrusterOn(t){g(this,f).on=t}thrusterRight(t){g(this,f).right=t}update(t,e){const i=+g(this,f).on-+this.reverse;this.push(this.angle,i*g(this,f).power,e),this.twist((+g(this,f).right-+g(this,f).left)*g(this,p),e),g(this,w).update(e),this.health.left-=this.compromised?Math.min(e,this.health.left):0,super.update(t,e)}}p=new WeakMap,f=new WeakMap,w=new WeakMap;var M,y,b,k,x=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},T=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class W{constructor(t,e,i,s){M.set(this,void 0),y.set(this,void 0),b.set(this,void 0),k.set(this,void 0);const{align:n="end",color:r="white",digits:a=0,height:h=10}=s||{};x(this,k,{align:n,color:r,digits:a,height:h}),x(this,M,t),x(this,y,e),x(this,b,i?i+": ":"")}draw(t,e){t.save(),t.fillStyle=T(this,k).color,t.font=T(this,k).height+"pt sans-serif",t.textAlign=T(this,k).align,t.fillText(T(this,b)+e.toFixed(T(this,k).digits),T(this,M)-2,T(this,y)+T(this,k).height-1),t.restore()}}M=new WeakMap,y=new WeakMap,b=new WeakMap,k=new WeakMap;var P,S,E=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},A=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class I extends s{constructor(t,e,i){super(t,e,i,Math.sqrt(i/1/Math.PI),0),P.set(this,void 0),S.set(this,[]),E(this,P,Math.random()-.4),E(this,S,this.initShape(this.radius))}child(t){const e=new I(this.x,this.y,t);return e.speed=Object.assign({},this.speed),e}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.angle),class{static drawAsteroid(t,e,i,s){t.save(),t.strokeStyle="white",t.fillStyle="black",t.beginPath(),i.forEach(n=>{t.rotate(2*Math.PI/i.length),t.lineTo(e+e*s*n,0)}),t.closePath(),t.fill(),t.stroke(),t.restore()}}.drawAsteroid(t,this.radius,A(this,S),A(this,P)),t.restore()}initShape(t){const e=2*Math.PI*t;let i=Math.ceil(e/15);return i=Math.min(25,Math.max(5,i)),Array.from({length:i},()=>Math.random()-.5)}}P=new WeakMap,S=new WeakMap;class C{static isCollision(t,e){return this.distanceBetween(t,e)<t.radius+e.radius}static distanceBetween(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}var _,j,L,O,H,q=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},R=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class U{constructor(t,e,i,s,n){_.set(this,void 0),j.set(this,void 0),L.set(this,void 0),O.set(this,void 0),H.set(this,void 0),q(this,_,t),q(this,j,e),q(this,O,s),q(this,H,n),q(this,L,i?i+": ":"")}draw(t,e,i){t.save(),t.fillStyle="white",t.strokeStyle="white",t.font=R(this,H)+"pt sans-serif";const s=t.measureText(R(this,L)).width;t.fillText(R(this,L),R(this,_),R(this,j)+R(this,H)-1),t.beginPath(),t.rect(s+R(this,_),R(this,j),R(this,O),R(this,H)),t.stroke(),t.beginPath(),t.rect(s+R(this,_),R(this,j),R(this,O)*(i/e),R(this,H)),t.fill(),t.restore()}}_=new WeakMap,j=new WeakMap,L=new WeakMap,O=new WeakMap,H=new WeakMap;var B,F,N,D=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},G=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class J{constructor(t,e,i){B.set(this,void 0),F.set(this,void 0),N.set(this,void 0),D(this,B,t),D(this,F,e);const{align:s="center",color:n="white",mainHeight:r=28,subHeight:a=18}=i||{};D(this,N,{align:s,color:n,mainHeight:r,subHeight:a})}draw(t,e,i){t.save(),t.fillStyle=G(this,N).color,t.textAlign=G(this,N).align,t.font=G(this,N).mainHeight+"pt sans-serif",t.fillText(e,G(this,B),G(this,F)),t.font=G(this,N).subHeight+"pt sans-serif",t.fillText(i,G(this,B),G(this,F)+G(this,N).mainHeight),t.restore()}}B=new WeakMap,F=new WeakMap,N=new WeakMap;var V,$,z,K,Q,X,Y,Z,tt,et,it,st,nt,rt,at,ht,ot=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},dt=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)};class ct{constructor(t){V.set(this,void 0),$.set(this,void 0),z.set(this,500),K.set(this,void 0),Q.set(this,void 0),X.set(this,void 0),Y.set(this,void 0),Z.set(this,void 0),tt.set(this,void 0),et.set(this,void 0),it.set(this,void 0),st.set(this,void 0),nt.set(this,void 0),rt.set(this,void 0),at.set(this,void 0),ht.set(this,void 0),ot(this,V,t),dt(this,V).focus(),ot(this,$,t.getContext("2d")),this.initIndicators(),this.initControls(),requestAnimationFrame(this.frame.bind(this)),this.restart()}frame(t){dt(this,ht)||ot(this,ht,t);const e=t-dt(this,ht);ot(this,Q,1e3/e),this.update(e/1e3),this.draw(),ot(this,ht,t),requestAnimationFrame(this.frame.bind(this))}draw(){dt(this,$).clearRect(0,0,dt(this,V).width,dt(this,V).height),class{static draw(t){t.save(),t.fillStyle="#009900",t.strokeStyle="#00FF00";const{height:e,width:i}=t.canvas;for(let s=0;s<i;s+=10)t.beginPath(),t.moveTo(s,0),t.lineTo(s,e),t.lineWidth=s%50==0?.5:.25,t.stroke(),s%50==0&&t.fillText(s+"",s+2,10);for(let s=0;s<e;s+=10)t.beginPath(),t.moveTo(0,s),t.lineTo(i,s),t.lineWidth=s%50==0?.5:.25,t.stroke(),s%50==0&&t.fillText(s+"",2,s+10);t.restore()}}.draw(dt(this,$)),dt(this,K).forEach(t=>{t.draw(dt(this,$))}),dt(this,Y)?dt(this,it).draw(dt(this,$),"GAME OVER","Press Space to play again"):(dt(this,st).forEach(t=>{t.draw(dt(this,$))}),dt(this,at).draw(dt(this,$)),dt(this,et).draw(dt(this,$),dt(this,tt)),dt(this,X).draw(dt(this,$),dt(this,Q)),dt(this,Z).draw(dt(this,$),dt(this,at).health.max,dt(this,at).health.left),dt(this,rt).draw(dt(this,$),dt(this,nt)))}initAsteroid(){const t=this.newAsteroid();return this.pushAsteroid(t),t}initAsteroids(t){ot(this,K,[]);for(let e=0;e<t;e++)dt(this,K)[e]=this.initAsteroid()}initControls(){dt(this,V).addEventListener("keydown",this.keyDown.bind(this),!0),dt(this,V).addEventListener("keyup",this.keyUp.bind(this),!0)}initIndicators(){const{height:t,width:e}=dt(this,V);ot(this,it,new J(e/2,.4*t)),ot(this,et,new W(e/2,15,"Level",{align:"center"})),ot(this,X,new W(e-10,t-15,"fps",{digits:2,color:"#009900"})),ot(this,Z,new U(10,15,"Health",100,10)),ot(this,rt,new W(e-10,15,"Score"))}keyDown(t){this.keyHandler(t,!0)}keyHandler(t,e){let i=!0;switch(t.key){case"ArrowUp":dt(this,at).thrusterOn(e);break;case"ArrowLeft":dt(this,at).thrusterLeft(e);break;case"ArrowRight":dt(this,at).thrusterRight(e);break;case"ArrowDown":dt(this,at).reverse=e;break;case" ":dt(this,Y)?this.restart():dt(this,at).weaponTrigger=e;break;default:i=!1}i&&t.preventDefault()}keyUp(t){this.keyHandler(t,!1)}levelUp(){ot(this,tt,dt(this,tt)+1),this.initAsteroids(dt(this,tt))}newAsteroid(){return new I(dt(this,V).width*Math.random(),dt(this,V).height*Math.random(),7e3+5e3*Math.random())}pushAsteroid(t,e=.015){t.push(2*Math.PI*Math.random(),5e6,e),t.twist((Math.random()-.5)*Math.PI*5e6*.02,e)}restart(){ot(this,Y,!1),ot(this,tt,0),ot(this,nt,0),ot(this,at,new m(dt(this,V).width/2,dt(this,V).height/2,100)),ot(this,st,[]),this.levelUp()}splitAsteroid(t,e){t.mass-=dt(this,z),ot(this,nt,dt(this,nt)+dt(this,z));const i=.25+.5*Math.random();[t.child(t.mass*i),t.child(t.mass*(1-i))].forEach(t=>{t.mass<dt(this,z)?ot(this,nt,dt(this,nt)+t.mass):(this.pushAsteroid(t,e),dt(this,K).push(t))})}update(t){0===dt(this,K).length&&this.levelUp(),dt(this,at).compromised=!1,dt(this,K).forEach(e=>{e.update(dt(this,$),t),C.isCollision(e,dt(this,at))&&(dt(this,at).compromised=!0)}),dt(this,at).health.left<=0?ot(this,Y,!0):(dt(this,at).update(dt(this,$),t),dt(this,st).forEach((e,i,s)=>{e.update(dt(this,$),t),e.life<=0?s.splice(i,1):dt(this,K).forEach((n,r,a)=>{C.isCollision(n,e)&&(s.splice(i,1),a.splice(r,1),this.splitAsteroid(n,t))})}),dt(this,at).weaponTrigger&&dt(this,at).weaponLoaded&&dt(this,st).push(dt(this,at).shoot(t)))}}V=new WeakMap,$=new WeakMap,z=new WeakMap,K=new WeakMap,Q=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,ht=new WeakMap,function(){const t=document.createElement("h1");t.innerText="Asteroids Game";const e=function(){const t=document.createElement("canvas");return t.id="asteroids-game",t.height=600,t.width=600,t.tabIndex=1,t}();document.body.appendChild(t),document.body.appendChild(e),new ct(e)}()}]);
//# sourceMappingURL=main.bundle.js.map